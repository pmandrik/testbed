### PART I intro
kernel - software that controls the hardware resources of the computer and provides an environment under which
programs can run  
layers: kernel - system calls - shell, library routines, applications  
operation system - kernel and all the other software that makes a computer useful and gives the computer its personality.  
shell - command-line interpreter that reads user input and executes commands  
File Descriptors - normally small non-negative integers that the kernel uses to identify the files accessed by a process  
stdin & stdout redirect : ./a.out < infile > outfile  
program - executable file residing on disk in a directory. A program is read into
memory and is executed by the kernel as a result of one exec function.
process - executing instance of a program.  
process ID - non-negative integer, unique numeric identifier.  
fork, exec and waitpid - basic functions to spawn and controll processes  
fork - create new process which is a cocpy of the caller  
exec - replace child process with new program file  
Threads share same adress space, file descriptors, stacks and process related attributes. Threads executed of its own stack but can access stack of other threads (same memory).  
User ID (0 for root) & Group ID used for permission checks.  
Signals - technique used to notify a process that some condition has occurred. We can ignore, provide a function to callor follow default behavior.  
Calendar time - the number of seconds since the Epoch:
00:00:00 January 1, 1970, Coordinated Universal Time (UTC).  
Process time (CPU time) - measures the central processor
resources used by a proces in clock ticks.  
Clock time - amount of time the process takes to run (depends on the number of other processes being run on the system).  
User CPU time - time attributed to user instruction.  
System CPU time - time attributed to kernel (e.g. read(), write(), system calls).  
System calls - limited number of entry points directly into the kernel  

### PART II standarts
POSIX - Portable Operating System Interface, operating system interface standard to promote the portability of applications among various UNIX. POSIX includes ISO C std library headers and optional headers.   
Single UNIX Specification - additional
interfaces that extend the functionality provided by the POSIX.1 specification.  
X/Open System Interfaces - describes optional interfaces
and defines which optional portions of POSIX.1 must be supported for an implementation to be deemed XSI conforming. Only XSI-
conforming implementations can be called UNIX systems.  
Linux - version of UNIX system (but not a UNIX system). Mac OS X - unix system, solaris - unix system. FreeBSD + others 3 are POSIX compilant more or less.   
Limits in implementation:
- compile-time limits (e.g., what’s the largest value of a short integer?)  
- Runtime limits (e.g., how many bytes in a filename?)  

could be fixed including e.g. header with INT_MAX max value of int.  
ISO C - <limits.h>  compile-time limits digits related. <float.h> for floating point. ISO C standard specifies minimum acceptable values. POSIX.1 makes extensions implementation must support, e.g. minimum value of 2,147,483,647 for INT_MAX.    
ISO C - FOPEN_MAX, minimum number
of standard I/O streams that the implementation guarantees can be open at once,  <stdio.h> - in POSIX.1 STREAM_MAX = FOPEN_MAX  
ISO C - TMP_MAX, maximum
number of unique filenames generated by the tmpnam function, <stdio.h>  
POSIX - provides multiple limits e.g. minimum "number of links to a file" implementation must provides (may can provide more), defined in limit.h or returned by sysconf, pathconf, and fpathconf calls.  
XSI - extra 5 constants.  

Options (optional interfaces) - may or maynot be in the system.
Compile-time options are defined in <unistd.h>, runtime options  in sysconf function or runtime options that are associated with a file or a directory are in pathconf and fpathconf.  

If the symbolic constant is undefined or −1 -> unsupported at compile time. If the symbolic constant > 0 -> option is supported.
If the symbolic constant = 0 -> call sysconf, pathconf, or fpathconf (replacing _XOPEN_UNIX -> _SC_XOPEN_UNIX, _POSIX_RAW_SOCKETS -> _SC_RAW_SOCKETS).  

### PART III I/O
Unbuffered I/O = read or write invokes a system call in the kernel  
In kernel  all open files are referred to by file descriptors (int > 0).  
In shell and many applications: STDIO - file descriptor 0, STDOUT - file descriptor 1, STDERR - file descriptor.  
FD returned by open and openat is guaranteed to be the lowest-numbered unused descriptor  

In kernel:  
- for every process table of open FD (FD flags, pointer to file table)  
- file table where for every file - file flag (read, write, append ...), offset, poiter to v-node table  
- v-node table contains file type info and functions operating on the file, and i-node (size, owner, pointer to data blocks, ...)  

v-node is file system-independed info  
i-node is file system-dependent  
If two processes have same file open -> have v-mode pointers to same v-node  
dup create a copy of FD - different process table entries with pointers to same file table  

When we write data to a file, kernel normally copie data into one of its buffers and queued for writing to disk at some later time (delayed write).  
sync function queues all the modified block buffers for writing and returns; not waiting for the disk writes to take place.  
sync is normally called periodically (~30s) by
system daemon  

fsync(int fd) waits for the disk writes into fd to complete before returning. Is used when needs to be sure that the modified blocks have been written to the disk.  
fdatasync(int fd) = fsync but only data not file’s attributes.  

fctnl - modify open file state  
ioctl - multiple io commands, terminal IO, socket IO, mag tape IO...  

### PART IV Files & Dirs

`stat()` - information (`struct stat`) about file using path  
`fstat()` - using file descriptor  
`lstat()` - information about symbolic link  
`fstatat()` - relative path (similare to openat)  

`struct stat` - file type, permissions, i-node number,
device number, user id, group id, size (bytes), time of last access, modification ...  







